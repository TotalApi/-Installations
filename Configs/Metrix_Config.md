Параметры Web-приложения MetriX
===============================

Данные параметры должны быть указаны в файле `appconfig.json`, который находится в каталоге **MetriX**.


Общие параметры
---------------
    
    serverHost                       - адрес и (опционально) порт и протокол подключения к сервисам TotalApi;
        [protokol:]//[host][:порт]     если протокол не указан используется `http`;
                                       если порт не указан - используется порт по умолчанию в зависимости от протокола.
										  
    appId                            - идентификатор Web-приложениях;
    
    appTitle                         - наименование Web-приложениях;

    apiKey                           - API-key подключения к сервисам TotalApi;

    modulesFolders                   - перечень каталогов, разделённых точкой с запятой, откуда следует
        Modules (по умолчани           загружать сборки программных модулей. Позволяет использовать
                                       относительную адресацию, относительно исполнимого файла приложения.
                                       Поддерживается рекурсивная загрузка из подкаталогов указанных каталогов. 
                                       Модули из каталога приложения будут загружены в любом случае.
                                       Загружены будут только модули с именем вида TotalApi.*.dll.
    
	ConnectionStrings				 - строки подключения к базам данных

    totalapi.log                     - параметры протоколирования

                                           
Параметры подсистемы статистики
-------------------------------
    
	// общие параметры
	Staticstics								 
    {
        "IsDisabled": true,

        // Размер очереди статистики по умолчанию.
        // Положительное значение говорит о том, что при превышении размера очереди новые данные будут проигнорированы.
        // Отрицательное значение - очередь будет ожидать обработку предыдущих данных перед добавлением новых (не рекомендуется).
		// 0  - не использовать очередь (не рекомендуется).
        "WriteQueueSize": 1000
    }
   
	// параметры подключения к БД ведения статистики InfluxDb
    InfluxDb 
	{
        "IsDisabled": false,
        "Url": "http://[host]:8086:4444", // первый порт - http, второй - udp
        "DbName": "stat_db",              // наименование БД
        "RetentionPolicy": "seven_days",  // период хранения
        "User": "[user]",                 // пользователь
        "Password": "[password]",         // пароль
        "WriteQueueSize": 1000,           // размер очереди записи (переполнение игнорирует новые записи)
		"Transport": "default",           // default/http/udp
		"TimeWindowWidth": 5000 		  // ширина окна (ms) накопления данных статистики           
	}                                                                     

Параметры для управления протоколированием приложения
-----------------------------------------------------

Данные настройки влияют на вывод информации передаваемой через интерфейс `ILogger`.

Настройки протоколирования указываются в разделе `totalapi.log` конфигурационного файла `TotalApi.Server.Host.json`. 

	disabled
		false (по умолчанию)            - глобальное включение/выключение протоколирования

	async
        true (по умолчанию)             - все сообщения логгера попадают в очередь, которая обрабатывается одним отдельным потоком.
        false                           - без очереди

	queueSize
		1000 (по умолчанию)             - размер очереди по умолчанию
	
	separator
        "\t" (по умолчанию)             - разделитель отдельных элементов строки протокола

	files                               - массив объектов-описателей файлов протокола  

Протоколирование может вестись в несколько файлов протокола, для разделения выводимой информации по категориям и уровню протоколирования. Формат объекта-описателя описан ниже:

	disabled
		false (по умолчанию)            - включение/выключение протоколирования данного файла

    file
      <строковое значение>              - имя файла протокола. Если полный путь не задан - он расширяется относительно каталога запуска программы.
                                          Если указано имя CON - вывод будет вестись не в файл, а в консоль.
                                          Поддерживаются макроподстановки, используемые в методе FileSystemExtension.ExpandPath.

    level
      7 (по умолчанию)                  - битовая маска, задающая уровень протоколирования:
                                            1  - информационные сообщения
                                            2  - предупреждения
                                            4  - ошибки
                                            8  - отладка
                                            16 - статистика

    console
      false (по умолчанию)              - дублировать вывод в файл с выводом в консоль. В DEBUG сборке значение этого параметра по умолчанию равно true.

    append
      false (по умолчанию)              - создавать файл протокола заново при старте программы 
	  true                              - дописывать в существующий

    persistent
      false (по умолчанию)              - нужно ли сохранять файл протокола при старте программы. 
                                          Старый файл переименовывается в <имя файла>.yy-MM-dd.<расширение>. 
                                          Игнорируется если totalapi.log.append равно true.

    splitDays              
      1 (по умолчанию)                  - создавать новый файл протокола каждые <splitDays> дня. 
                                          Старый файл переименовывается в <имя файла>.yy-MM-dd.<расширение>. 
                                          Если значение меньше или равно нулю - разбиения файла не происходит.
                                          Если значение не задано, то оно равно 1 если totalapi.log.append или totalapi.log.persistent равно true.

    splitSizeMb            
      100 (по умолчанию)                - создавать новый файл протокола когда его размер превышает <splitSizeMb> мегабайт. 
                                          Старый файл переименовывается в <имя файла>.yy-MM-dd.<расширение>. 
                                          Если значение меньше или равно нулю - разбиения файла не происходит.
                                          Если значение не задано, то оно равно 100 если totalapi.log.append или totalapi.log.persistent равно true.

    separator              
      "\t" (по умолчанию)               - разделитель отдельных элементов строки протокола 

    categories							- строковый массив названий категорий, которые нужно протоколировать.
                                          Поддерживается простой wildcard-формат (`*` - заменяет любое кол-во символов, `?` - заменяет ровно один символ), 
                                          так и Regexp (для этого шаблон категории должен начинаться и заканчиваться символом `/`).
                                          Если в начале стоит символ `-` - эта категория будет исключена из протокола.   



Дополнительные параметры
------------------------
    
